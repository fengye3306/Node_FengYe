



* 必须打开 2450 并使其预热至少 1 小时才能达到额定精度。



### 专业术语  

* DUT   
 Device Under Test的缩写，翻译成中文就是 被测器件 或 被测物。 在电子测试和测量中，DUT 指的是当前正在进行测试、评估或测量的具体设备、组件或系统。  


### 端子  

> FORCE（强制）端子  

**施加**   
此端子用以提供电压或电流源：通过 FORCE HI（强制 HI） 和 FORCE LO（强制 LO） 端子，仪器可以**向被测器件（DUT）提供所需的电压或电流**。接收电压或电流：同样，这些端子也可以用于从DUT接收电压或电流，具体取决于测量模式。      
恒压源：无论负载电阻如何变化，仪器都能通过内部控制机制调整输出电流，以确保输出电压保持在设定值。  
恒流源：无论负载电阻如何变化，仪器都能通过内部控制机制调整输出电压，以确保输出电流保持在设定值。     

“FORCE HI”是连接到被测件的高电位端，用来施加正电压或电流。“FORCE LO”是连接到被测件的低电位端，用来施加负电压或电流，或作为地线使用。  

>  SENSE（感应）端子    

**测量**  
此端子用以测量被测器件（DUT）的电压：通过 SENSE HI（感应 HI） 和 SENSE LO（感应 LO） 端子**精确测量DUT两端的电压**。     
“SENSE HI”是连接到被测件的高电位端，用来测量施加点的真实电压。“SENSE LO”是连接到被测件的低电位端，通常是接地端或零电位端，用于提供参考点以准确测量高端的电压。
这里的“HI”和“LO”分别代表高端（High）和低端（Low）。   

> Kelvin测量法  

由威廉·汤姆森·开尔文勋爵（ William Thomson, Lord Kelvin）在1861年发明的开尔文电桥测量低电阻是模拟电路测试常用的测试方法之一，又叫开尔文四线检测（Kelvin Four-terminal sensing），也被称之为四端子检测（4T检测， 4T sensing）。   

> 两线测量，因为线材的电阻，以及接触电阻的影响产生误差    

![两线测量](./img/02_keithley2450/00.png ':size=300')   

直接将两根表笔的直接接到电阻的两端，就可以通过万用表读取测量到的电阻值。是否说明，我们有办法直接对电阻进行测量呢？  
其实不然，电阻的测量，都是通过施加固定的电流，通过对电阻两端电压的测量，然后通过计算得到对应测量的电阻值。 **但是，我们必须注意到线材的电阻，以及接触电阻的影响**。接触电阻可能会在几十毫欧到几百毫欧级别，线材的电阻则不定，跟线长及线的粗细有关系，大概也在毫欧及欧姆级别。  
如果被测量的电阻很小，只有几个欧姆，甚至毫欧级别，采用两线测量的方法是无法精确测量到实际的电阻的，因为接触电阻、线阻的影响会被体现出来。这些影响一直存在，只是当我们在测量比较大的电阻的时候，这些影响所占的比重非常小，就被忽略不计了。比如说测量1k欧姆电阻，而接触电阻及线材电阻的为1欧姆，则影响在0.1%左右。如果测量的电阻是1欧姆，影响则占到了50%!   

> Kelvin四线制测量法

![四线测量](./img/02_keithley2450/01.png ':size=300')   

1. FORCE导线：承载电流，它们将电流从电源（或电流源）引入DUT，并将其返回。  
2. SENSE导线：不承载电流，只用于测量DUT两端的电压。    




## 测量

### 两线法测量高阻抗电阻器   

您可以使用 2450 提供电压或电流源，并从前面板进行测量。   

![2450两线测量](./img/02_keithley2450/02.png ':size=300')   

> 测量步骤 

* 选择源和测量功能 
* 选择源类型 
* 设置源值 
* 设置源限值 
* 选择量程 
* 打开源输出 
* 观察显示器上的读数 
* 关闭源输出


> 具体步骤

1. 按前面板上的 POWER（电源）开关以打开仪器。 
2. 在前面板上，按 FUNCTION（功能）键。 
3. 在 Source Voltage and Measure（源电压和测量）下，选择 Current（电流）。 
4. 选择源量程。在主页屏幕上的 SOURCE V（源 V）下，选择 Range（量程）。 
5. 选择 20 V。 
6. 选择 Source（源）。 
7. 输入 10 V 并选择 OK（确定）。 
8. 选择 Limit（限值）。 
9. 输入 10 mA 并选择 OK（确定）。 
10. 在主页屏幕的 MEASURE（测量）区域中，选择 Range（量程）。 
11. 选择 Auto（自动）。 
12. 按 OUTPUT ON/OFF（输出开/关）开关打开输出。OUTPUT（输出）指示灯亮起。 
13. 观察显示器上的读数。对于 10 kΩ 电阻器，典型显示值为：   
1.00000 mA   
+9.99700 V   
14.  完成测量后，按 OUTPUT ON/OFF（输出开/关）开关关闭输出。OUTPUT（输出）指示灯熄灭。 
 
### Kelvin法测量低阻抗电阻   

> 所需设备  

* 一台 2450 SourceMeter® 仪器 
* 对于前面板连接，请使用四根绝缘香蕉电缆，例如 Keithley Instruments 8608 型高性能夹式导线套
件（2450 附带一套；您还需要另一套） 
* 对于后面板连接，使用四根三轴电缆 
* 一个要测试的低电阻器件；此处所示的应用使用 20 mΩ 电阻器 

> 注意事项   

* 所有输出和保护端子上都可能存在危险电压。为防止出现可能导致人身伤害或死亡的电击，切勿在输出打开时与 2450 进行连接或断开连接。
* 为避免电击，必须将测试连接配置为使用户不会接触导体或任何与导体接触的被测器件 (DUT)。**在连接 DUT 之前断开电源是一个很好的做法**。
* 可以将 LO 端子连接到前面板上的机箱接地端子或后面板上的机箱接地螺丝端子。前面板端子与后面板端子相互隔离。因此，如果您使用前面板端子，请将其接地至前面板 LO 端子。如果使用后面板端子，请将其接地至后面板 LO 端子。  


> 器件连接  

* 将一组测试导线连接到 FORCE LO（强制 LO）和 FORCE HI（强制 HI）端子；此设置强制电流
通过被测器件。  
* 将另一组测试导线连接到 SENSE HI（感应 HI）和 SENSE LO（感应 LO）端子，这些端子测量被
测器件 (DUT) 上的压降。   

![四线测量](./img/02_keithley2450/03.png ':size=300')   

将导线连接到被测器件 (DUT) 时，请注意将 FORCE LO（强制 LO）和 SENSE LO（感应 LO）连接
附接到其中一根 DUT 导线。将 FORCE HI（强制 HI）和 SENSE HI（感应 HI）连接附接到另一根导
线。将感应连接尽可能靠近被测电阻器连接。此 4 线测量消除测量中测试导线的电阻。

![四线测量前面板](./img/02_keithley2450/04.png ':size=300')   
![四线测量后面板](./img/02_keithley2450/05.png ':size=300')   

可以为本应用使用前面板或后面板端子。下图显示了前面板和后面板的实体连接。注意，必须使用前
面板端子或后面板端子 — 不能混合连接。 
后面板端子连接为三轴连接。前面板连接为安全型香蕉插孔。  


> 测量步骤  

* 打开仪器。 
* 选择源电流并测量电阻功能。 
* 设置电流源值。 
* 选择四线（远程感应）连接。这种可以消除导线电阻对测量精度的影响。 
* 启用偏移补偿。这可减少热电电压引起的偏移。有关偏移补偿的信息，请参阅《2450 型号参考 
手册》中的“什么是偏移补偿？”。 
* 打开源输出并开始测量。 
* 从前面板或远程接口生成读数。 
* 关闭源输出。 
  
> 具体步骤实操  

要从前面板设置应用：   

1. 按照器件连接（第 5-2 页）中的说明，从 2450 连接到被测器件。 
2. 打开仪器。 
3. 按 FUNCTION（功能）键。 
4. 在 Source Current and Measure（源电流和测量）下面选择 Resistance（电阻）。将显示警告消息。 
5. 选择 OK（确定）以清除错误消息。 
6. 按 HOME（主页）键。 
7. 在 SOURCE I（源 I）区域中，选择 Source（源）旁边的按钮。选择适合您器件的源值。 
8. 按 MENU（菜单）键。在 Measure（测量）下，选择 Settings（设置）。 
9. 将 Sense（感应）设置为 4-Wire Sense（4 线感应）。 
10.  将偏移补偿设置为 On（打开）。 
11.  按 HOME（主页）键。 
12.  按 OUTPUT ON/OFF（输出开/关）开关以启用输出。 
13.  选择 Measurement Method（测量方法）指示器。 
第 5 节：测量低电阻器件 2450 型 SourceMeter® 仪器用户手册  
5-6 2450-900-03 Rev. E / August 2019 
14.  选择 Continuous Measurement（连续测量）开始执行测量。仪器在主页屏幕的 MEASURE 
VOLTAGE（测量电压）区域显示测量值。

> 使用通信，调用SCPI指令完成电阻测量  

```scpi
# 重置 2450
*RST       
# 配置 Simple Loop（简单循环）触发模式模板以进行 100 次读数。
TRIG:LOAD "SimpleLoop", 100 
# 设置为测量电阻。
SENS:FUNC "RES" 
# 打开自动量程。
SENS:RES:RANG:AUTO ON 
# 启用偏移补偿。
SENS:RES:OCOM ON 
# 设置为使用 4 线感应模式。
SENS:RES:RSEN ON 
# 显示 GRAPH（图形）滑动屏幕。
DISP:SCR SWIPE_GRAPh 
# 打开输出。
OUTP ON 
# 开始读数。
INIT 
# 等待至完成。
*WAI 
# 关闭输出。
OUTP OFF 
# 从 defbuffer1 读取电阻和时间值。  
TRAC:DATA?1, 100, "defbuffer1", READ, REL
```


### 漏电测量   

对于漏电测量，本小结有两个示例  
* 如何使用 2450 对电容器进行漏电流测量 
* 如何使用 2450 测量同轴电缆的两个导体之间的绝缘电阻

这两个应用示例之间的唯一区别是，当您测量漏电流时，结果将以安培为单位返回。测量绝缘电阻时，
结果将以欧姆为单位返回。    
**因为器件需要时间充电，此漏电流应用将电压施加一段指定的时间**。在某些情况下，产生的电流是在整
个器件偏置期间测量的。在其他情况下，吸入周期结束时只进行一次读数。


> 漏电（leakage current）

**电容的漏电是什么意思？**  

在电子领域，漏电通常指的是电流通过理想情况下应该是绝缘的部件的非预期路径流动的现象。对于电容器来说，漏电（leakage current）是指在电容器充电时，即使没有外部电路的连接，电容器仍然会逐渐失去其储存的电荷的现象。   
电容器理想地应该是一个完美的储能设备，不应有电荷的损失。然而，实际的电容器不是完美的绝缘体，其两个导电板之间的绝缘材料（电介质）总会有一些微小的电导性。因此，即使在电容器两端施加了稳定的电压，也会有少量电流渗透通过这个电介质，这就是所谓的漏电流。   

**电容为什么会漏电？**      
电介质的电阻不是无限大：所有实际的电介质都有一定的电阻，虽然这个电阻通常很高，但不可能完全阻止电荷的流动。因此，电荷会逐渐流失，表现为漏电流。
电介质的缺陷：电容器的电介质可能由于材料的不完美（如微小裂缝、杂质或其他结构不均匀性）而具有缺陷，这些缺陷可能导致漏电。
外部条件：温度、湿度等环境因素也可以影响电介质的性能，从而影响漏电流的大小。例如，高温可以增加电介质的离子活动性，导致更大的漏电流。

**如何测量电容的漏电流？**
如何测量电容的漏电流？如你提到的应用，在使用 Keithley 2450 源表测量电容器的漏电流时，通常是通过设置一个恒定的电压源，然后测量在没有其他外部电路连接的情况下，通过电容器的微小电流。这种测量可以帮助评估电容器的质量和适用性，特别是在对电气绝缘性有严格要求的应用中。测量漏电流通常包括长时间的监测，因为电流可能极小且变化缓慢。   

> 电容器进行漏电流测量 

![漏电容测量](./img/02_keithley2450/07.png ':size=300')     

以下应用演示如何在 2450 上使用前面板或通过远程接口提供电压源并测量产生的电流来测量 1 nF 电容器的漏电流。 
本应用将 2450 设置为提供 20 V 电压源并以时间函数形式测量产生的漏电流。仪器在特定周期内进行电流测量。即 持续监控电容的漏电情况。

测试大致步骤：  

* 重置仪器 
* 设置仪器读取后端子 
* 选择源电压功能并测量电流功能 
* 设置电压源的幅度 
* 打开自动量程 
* 设置测量延迟 
* 使用 Duration Loop（时长循环）触发模式模板在指定的时间段内执行读数 
* 打开源输出 
* 在指定时间内进行读数 
* 关闭源输出 


1. 根据器件连接（第 6-2 页）中的说明，使用测试导线将电容器连接到 2450 的后面板。 
2. 重置 2450。 
    a. 按 MENU（菜单）键。   
    b. 在 System（系统）下，选择 Info/Manage（信息/管理）。   
    c. 选择 System Reset（系统重置），然后选择 OK（确定）。   
3. 按 TERMINALS FRONT/REAR（端子前/后）开关，将仪器设置为使用后面板端子（开关左侧 
显示 R）。 
4. 按 HOME（主页）键。 
5. 按 FUNCTION（功能）键。 
6. 在 Source Voltage and Measure（源电压和测量）下，选择 Current（电流）。 
7. 选择 Source（源）（位于主屏幕底部）。 
8. 输入 20 V 并选择 OK（确定）。 
9. 按 MENU（菜单）键。 
10.  在 Trigger（触发）下，选择 Templates（端子）。 
11.  将 Templates（模板）设置为 DurationLoop（时长循环）。 
12.  将 Duration（时长）设置为 30s。这是吸入时间。 
13.  将 Delay（延迟）设置为 0.2s。 
14.  按 HOME（主页）键返回主页屏幕。 
15.  按 TRIGGER（触发）键。系统将提示您更改测量方法。 
16.  选择 Yes（是），然后选择 Initiate Trigger Model（启动触发模式）以打开输出并进行测量。测
量完成后，仪器关闭输出。    


要查看前面板图形上的漏电流测量值：      
1. 按 MENU（菜单）键。 
2. 在 Views（视图）下，选择 Graph（图表）。 
3. 选择 Scale（标度）选项卡。 
4. 在 Scale Format（标度格式）旁的 Y-Axis（Y 轴）下，选择 Log（日志）。 
5. 在 Method（方法）旁的 X-Axis（X 轴）下，选择 Show All Readings（显示所有读数）。 
6. 选择 Graph（图形）选项卡以查看图形。 


```scpi
*RST 
:SOUR:FUNC VOLT 
:SOUR:VOLT 20 
:SOUR:VOLT:ILIMIT 0.01 
:SENSE:FUNC "CURR" 
:ROUT:TERM REAR 
:CURR:RANG:AUTO ON 
:SENSE:CURR:NPLC 1 
:TRIG:LOAD "DurationLoop", 30, 0.2 
:INIT 
*WAI 
:TRAC:ACT? "defbuffer1" 
:TRAC:DATA?1, 30, "defbuffer1", READ, REL 
:SOUR:VOLT 0 
:OUTP ON 
:SOUR:VOLT:DEL 2 
:OUTP OFF  

 重置 2450。 
 设置为源电压。 
 将源电压设置为 20 V。 
 将电流限值设置为 10 mA。 
 将仪器设置为测量电流。 
 设置为使用后面板端子。 
 将电流量程设置为自动量程。 
 将电源线周期数设置为 1。 
 加载 DurationLoop（时长循环）触发模式以
运行 30 s，延迟 200 ms。 
 启动触发模式。 
 等待测量完成。 
 查询 defbuffer1 中的读数数量并返回读数
和时间。30 是查询的读数数量。 
 将电容器放电至 0 V。 
 打开输出。 
 延迟两秒钟让电容器放电。 
 关闭输出。  

```

> 电缆绝缘测试   

不做重复记录了，应该自己看手册  

### 场效应管I-V测量

### 可充电电池测量

## 闲谈
### 人体安全电压

*原文：美国国家标准学会 (ANSI) 声明当电压电平超过 30 V RMS、42.4 V peak 或 60 VDC 时存在电击危险。良好的安全实践是在测量前预计任何未知电路中都存在危险电压*     

> RMS (Root Mean Square)（均方根）

均方根代表了交流电压的有效值。30 V RMS 表示平均电压水平，相当于在相同电阻负载下，与之传递相同功率的直流电（DC）电压值.   
当我们谈到家庭电源线提供的是“220V”，这里的 220V 指的就是电压的 RMS 值。这意味着该电压的效能等同于一个220V直流电源的效能。这意味着该电压的效能等同于一个220V直流电源的效能。实际的峰值电压要高于 RMS 值，对于一个标准的正弦波交流电，峰值大约是 RMS 值的@\sqrt{2}@倍，即约为 311V。  
电压和电流不是恒定不变的，而是以正弦波的形式变化。因此，我们不能直接使用最大峰值来描述其能量输出。RMS 值提供了一种测量方法，能够有效地表示交流电流的电压或电流在给定时间内平均输出的功率。计算 RMS 的公式如下：  

@@
\text{RMS} = \sqrt{\frac{1}{T} \int_0^T [f(t)]^2 \, dt}
@@

在电工和电子行业中，使用 RMS 值可以简化电气设备的设计和分析，因为大多数家用和工业设备都以交流电形式运行.  

* @f(t)@代表电压或电流随时间变化的函数
* @𝑇@是周期的长度。

> Peak Voltage（峰值电压）  

是交流电在其周期内达到的最大电压值。它通常是 RMS 值的 @\sqrt{2}@ 倍（约1.414倍），因为正弦波的峰值是其 RMS 值的 @\sqrt{2}@ 倍。  

> 电压电平超过 30 V RMS,或 60 VDC 时存在电击危险,既然30v RMS 意思是等效于直流30v，为什么到了真正的直流电上确是 60 VDC？

30 V RMS 指的是交流电的有效值（均方根值），它表达的是交流电在功率传递方面等效于30伏直流电的电压。这个有效值用于表征交流电在进行功率传递时的平均电能水平，尽管其峰值电压会更高（约为42.4 V peak）。  
然而，直流电的安全阈值更高（60 VDC），这主要是因为交流电和直流电对人体的生理影响不同。   

生理响应差异：人体对交流电和直流电的生理响应不同。交流电更易于通过人体因为其频繁的方向变化，容易引起肌肉收缩，包括心脏，可能导致心律失常。直流电虽然穿透力强，但是因为其不变的方向，人体对其有更高的阻抗，所以在同等电压下，直流电通常被认为比交流电安全。   
电击和致命风险：研究显示，在某些情况下，交流电可能在较低的电压下就足以造成致命的伤害，而直流电通常需要更高的电压才达到同样的风险水平。   

## SCPI command reference


### 单条测试

1. :FETCh? 用于提取已存在的数据，不触发新的测量。
2. :READ? 触发新的测量并返回结果，适用于单次测量。
3. :MEASure? 也触发测量，但允许指定测量类型，更加灵活。

### 仪器状态保存、读取

1. `*RCL` 该命令用于恢复之前使用 *SAV 命令保存的仪器设置。
2. `*SAV`此命令用于保存当前的仪器设置为用户保存的设置。

### CALCulate

`CALCulate`公式子系统   

### DIGital

`DIGital`配置仪表IO


### DISPlay  

`:DISPlay`子系统控制前面板的显示

### FORMat

`FORMat` 子系统的命令用于选择在远程接口上传输仪器读数时使用的数据格式。这包括设置数据的ASCII格式的精度，以及定义二进制数据的字节顺序。下面详细解释这些命令的用法和功能。

### OUTPut 

`OUTPut`子系统主要负责控制选定源（如电流源或电压源）的输出设置。这个子系统允许用户定义当输出关闭时源的行为状态，即决定当源被关闭时，设备应采取何种配置和行动。   
Keithley 2450 SourceMeter® 的 OUTPut 子系统主要是用来控制设备的电源输出，比如你可以设定当你关闭设备的电源时，设备应该具体做什么。这就像是给设备设置一个“休息模式”，告诉它在不供电的时候应该如何表现。   

1. 正常模式（NORMal）：   

当你把设备的电源关闭时，设备就会自动设置电压为0，电流限制到一个非常低的安全值，防止意外的大电流输出。
这个模式下，设备的屏幕会显示当前的状态，比如电压是多少，电流设置在哪里。

2. 高阻抗模式（HIMPedance）：     

在这个模式下，当你关闭设备的电源时，设备会彻底断开内部的连接，就像是把一座桥抬起来，让船只可以通过一样。这样可以确保设备不会影响到连接到它的其他电路。  

3. 零输出模式（ZERO）：  

这个模式把设备设置成完全不输出电压，但它依然可以进行测量。因此，你可以用它来做电流测量，因为它不会对电路产生任何电压影响。

4. 保护模式（GUARd）：     

如果你的测试需要设备在关闭电源时还能提供一点点电流或电压来保持电路的稳定，那么这个模式就非常有用。它会设置一个非常低的安全电流或电压，帮助保护你的电路。  


### ROUTe  

`ROUTe` 子系统用于选择仪器使用的输入和输出端口集，可以选择前面板或后面板的端口。  

### SCRipt   

`SCRipt` 子系统在Keithley 2450 SourceMeter®中用于控制和运行宏命令或仪器设置脚本。这个功能非常有用，特别是在你需要自动化重复的设置或测试步骤时。  

### SENSe1 ★ 

`SENSe1`子系统中的命令允许用户对Keithley 2450 SourceMeter®的测量设置进行精细控制，包括如何处理数据（例如通过平均减少噪声）和如何确保数据的准确性（例如通过自动零点校正）。这些功能对于需要高精度和可靠性的科学实验和工程测试非常重要。使用这些命令可以有效地调整设备行为，以适应各种测量需求和实验条件。


### SOURce ★  

`SOURce`子系统主要用于配置和控制电流源和电压源的相关设置。该子系统提供了一系列命令，允许用户管理源配置列表（source configuration lists），这些列表存储了一组预定义的源设置，可以方便地被调用和管理。   


> 1_ :SOURce[1]:CONFiguration:LIST:CATalog?     

在仪器里查找存储的所有“源配置列表”的名字。你可以想象成，每一个“配置列表”都包含了一套特定的设定，这些设定定义了仪器在进行测试时应该如何表现。这个指令的工作就是问仪器：“**你保存了哪些配置列表？**”

```cpp
:SOUR:CONF:LIST:CAT?
```

> 2_  :SOURce[1]:CONFiguration:LIST:CREate

该命令用于创建一个空的源配置列表，供用户存储配置索引。     

源配置列表（Source Configuration List）   
在测试测量设备（例如 Keithley 2450 SourceMeter）中，源配置列表是一个用于存储一组预定义的源输出设置的集合。这些设置可以包括电压、电流或功率的源值，以及其他相关参数。配置列表可以重复使用，确保测试的一致性和可重复性。   

```scpi
# 创建新源配置列表 名为 MySourceList
:SOUR:CONF:LIST:CRE "MySourceList"
```

> 3_ :SOURce:CONFiguration:LIST:DELete   
删除一个源配置列表  
```scpi 
# 删除名为 MySourceList 的整个源配置列表。
:SOURce:CONF:LIST:DEL "MySourceList"

# 删除 MySourceList 中的第 2 个配置。
:SOURce:CONF:LIST:DEL "MySourceList", 2
```


> 4_ :SOURce[1]:CONFiguration:LIST:QUERy?   

用于查询特定源配置列表中某个配置索引（Index）所存储的所有设置和参数值  

```scpi
# 查询指定的 <name> 配置列表中第 <point> 个索引的相关信息。 
:SOURce[1]:CONFiguration:LIST:QUERy? "<name>", <point>

:SOUR:CONF:LIST:QUER? "MySourceList", 2
# 查询配置列表 "MySourceList" 的第2个索引的内容。
```


> 5_ :SOURce[1]:CONFiguration:LIST:RECall  

此命令用于调用特定源配置列表中的某个配置索引，将该索引的参数设置应用到设备上  

```scpi
:SOURce[1]:CONFiguration:LIST:RECall "<name>", <index>
    <name>：源配置列表的名称（字符串格式）。
    <index>：要调用的配置索引（从1开始的整数）。若未指定，则默认调用第1个索引。
    <measureListName>（可选）：对应的测量配置列表名称。
    <measureIndex>（可选）：测量配置列表中的索引，默认与 <index> 对应。

# 调用配置列表 "MySourceList" 的第5个索引
:SOUR:CONF:LIST:REC "MySourceList", 5

# 调用 "MySourceList" 的第1个索引（默认索引）：
:SOUR:CONF:LIST:RECall "MySourceList"
```

> 6_ :SOURce[1]:CONFiguration:LIST:SIZE?   

:SOURce[1]:CONFiguration:LIST:SIZE? 用于查询指定源配置列表中包含的配置索引的数量   


> 7_ :SOURce[1]:CONFiguration:LIST:STORe  

用于将当前活跃的源设置（例如电压、电流等配置参数）存储到指定的源配置列表中的一个配置索引中。   
假设你现在设置了一个源（比如 5V 的电压输出），想保存这个配置方便以后直接调用，你可以用这个命令将当前的源配置保存到一个配置列表中。   

```scpi  
:SOURce[1]:CONFiguration:LIST:STORe "<name>", <index>
<name>：
    表示源配置列表的名称（字符串格式）。
    你要将配置存储到的目标列表名称。
<index>：
    表示源配置列表中的具体位置（索引号）。
    如果指定了索引，配置将存储到该位置；如果该位置已存在，则会覆盖原有的配置。
    如果没有指定索引，新配置会自动追加到列表的末尾。


# 示例 

# 创建一个名为 biasLevel 的配置列表：
:SOURce:CONF:LIST:CRE "biasLevel"
# 设置源功能为电压模式，电压电平为 5V：
:SOURce:FUNC VOLT
:SOURce:VOLT:LEV 5
# 将当前设置存储到 biasLevel 配置列表：
:SOURce:CONF:LIST:STORe "biasLevel"
```

> 8_ :SOURce[1]:<function>:DELay    

命令用于设置源的**手动**延迟时间，这个延迟会在源输出被激活后生效，确保源电平稳定后再进行测量。  
当源输出一个电压或电流值时，可能需要一段时间让输出稳定。这个命令可以在测量之前设置一个等待时间，确保测量数据准确。

如果源输出的电平变化比较慢，比如电容充电或电感性负载，需要时间稳定时，就可以用这个命令设置延迟。

2. 手动延迟与自动延迟:  

如果设置了手动延迟（通过该命令），自动延迟（AutoDelay）会被关闭。   
如果启用了自动延迟（AutoDelay），手动延迟值会被自动延迟覆盖。  
手动延迟是你自己设定的固定时间。自动延迟会根据设备检测的稳定时间自动调整，但手动延迟一旦设置，自动延迟就会失效。

延迟会应用于第一次源输出，以及之后每次源输出幅度发生变化时。  
无功能参数:

```scpi 
:SOURce[1]:<function>:DELay <value> 
:SOURce[1]:<function>:DELay <DEF|MIN|MAX> 
:SOURce[1]:<function>:DELay?

<function>:
    指定源的功能类型：
    CURRent：电流源。
    VOLTage：电压源。
<value>:
    延迟时间，单位为秒，范围为 0 到 10,000 秒（10 ks）。
<DEF|MIN|MAX>:
    设置预定义的延迟值：
        DEF：默认值（通常为 0 秒）。
        MIN：最小值（0 秒）。
        MAX：最大值（10 ks）。

# 用法  

# 将电压源的延迟设置为默认值。
:SOURce[1]:VOLTage:DELay DEF
# 设置延迟为 2 秒:
:SOURce[1]:CURRent:DELay 2
# 查询电压源的延迟值:
:SOURce[1]:VOLTage:DELay?
# 设置延迟为最大值（10 ks）:
:SOURce[1]:CURRent:DELay MAX

# 设置电压源延迟为默认值:  
:SOUR:VOLT:DEL DEF

# 设置电流源延迟为 5 秒:
:SOUR:CURR:DEL 5  
```

> 8_ :SOURce[1]:<function>:DELay:AUTO   

用于开启或关闭自动延迟时间功能，也可以查询是否启用自动延迟。  
如果开启了自动延迟，任何手动设置的延迟都会被自动延迟覆盖。如果手动设置了延迟，自动延迟会被禁用。  

```scpi  
# 关闭电流源的自动延迟。
:SOURce[1]:CURRent:DELay:AUTO OFF
# 启用电压源的自动延迟:
:SOURce[1]:VOLTage:DELay:AUTO ON

# 查询电流源的自动延迟状态,（返回 1 表示开启，0 表示关闭）:
SOUR:CURR:DEL:AUTO?
```

> 9_ :SOURce[1]:<function>:DELay:USER<n>  

```scpi
:SOUR:VOLT:DEL:USER1 5                // 将电压源的用户延迟1设置为5秒
:TRIG:BLOC:SOUR:STAT 1, ON            // 触发块1：打开电源输出
:TRIG:BLOC:DEL:DYN 2, SOUR1           // 触发块2：调用用户延迟1作为动态延迟
:TRIG:BLOC:MDIG 3                     // 触发块3：进行测量
:TRIG:BLOC:SOUR:STAT 4, OFF           // 触发块4：关闭电源输出
:TRIG:BLOC:BRAN:COUN 5, 10, 1         // 触发块5：将触发循环到块1，重复10次
:INIT                                 // 开始触发模型
```

这条命令让你可以预设几个自定义的等待时间（延迟），比如说电压源输出后，等5秒钟再进行测量。这些延迟特别适合那些需要时间稳定输出或延迟触发的复杂测量任务。

通过触发模型的动态调用，你可以轻松地把这些延迟插入到测量流程中，完全按你的需求灵活配置！

> 10_ :SOURce[1]:<function>:HIGH:CAPacitance   

该命令用于**启用或禁用高电容模式**（High Capacitance Mode）。  
当仪器处于低电流模式并驱动高电容负载时，高电容模式通过调整输出特性，可以有效减少因负载特性导致的过冲、振铃和不稳定问题，从而提高测量稳定性。这种现象起源于电路中的动态响应和振荡特性， 高电容负载在通电时的瞬间会表现为一个低阻抗的短路，并且需要较大的瞬时电流进行充电

在直流电路中，电阻是唯一影响电流的因素，因为电感和电容对直流电不起作用（稳态下电感看作短路，电容看作开路）。   
在交流电路中，电流和电压的关系由阻抗@Z@决定，其是电阻@R@、电感@L@、电容@C@的综合作用，它们共同决定电流和电压的关系。     
@@
Z = R + jX
@@

其中，@jX@ ：电抗（由电感和电容引起的频率相关性，表示电流与电压的相位差。例如当电压变化率越快，电容的阻抗越低，当变化率趋近于无穷时，电容呈现短路特性。
电容器的电流和电压关系由以下公式决定：  
@@
I = C \cdot \frac{dV}{dt}
@@

在电压变化率 @\frac{dV}{dt}@较大时，例如电路通电瞬间，电容器需要吸收大量瞬时电流，从而呈现低阻抗甚至短路特性。   

> 11_ :SOURce[1]:<function>[:LEVel][:IMMediate][:AMPLitude]   

该命令用于立即设置指定源功能（电流或电压）的固定输出幅度（即设置源的输出电平）。如果输出已经开启，新设定的电平值将立即生效。
这个命令就是用来 控制设备输出电压或电流的大小 的，直接告诉设备“输出多少伏电压”或者“输出多少安电流”，而且设置完会马上生效。  

1. 如果你**手动选择了设备的输出范围**（比如“只能在 2V 范围内输出”），那就不能超出这个范围。如果你让设备自动选择范围（自动范围模式），设备会自己调整到适合的范围。   
2. 如果设备的输出是开启状态（比如你启动了“电源输出”），**设置的值会立刻生效**。   
如果输出关闭，设置了也不会有实际的电压或电流流出来。   
```scpi
# 告诉设备我要调节电压
SOUR:FUNC VOLT 
# 设置电压为 1V
SOUR:VOLT 1
```

> :SOURce[1]:<function>:<x>LIMit[:LEVel]  

设置电流源和电压源的界限值，如果电流源工作，设置一个 电压上限，防止设备输出电压太高。
如果电压源工作，设置一个 电流上限，防止设备输出电流太大。这就像是给设备加了一个“护栏”，避免工作条件超出你的预期。   

1. 一旦输出超过限制值，设备会自动停止输出，以保护负载或自身的安全。  
2. 如果你手动选择了测量范围，限制值需要至少为测量范围的 10.6%。自动范围则无影响  
3. 如果你选择了一个不适合当前范围的限制值，设备会自动调整为一个合理的值，并提示你警告信息。   

```scpi 
<function>：定义源模式

CURRent：表示你是在控制电流源。
VOLTage：表示你是在控制电压源。
<x>：定义限制类型

I：电流限制（适用于电压源，防止电流过大）。
V：电压限制（适用于电流源，防止电压过高）。
<value>：设置限制的具体值
    电流源的电压限制范围：0.02 V 到 210 V
    电压源的电流限制范围：1 nA 到 1.05 A

# 设置电流源的电压上限为 15V：
:SOUR:CURR:VLIM 15

# 查询电压源的电流限制值：
:SOUR:VOLT:ILIM?

# 设置电压源的电流限制为默认值：
:SOUR:VOLT:ILIM DEF

# 查看是否触发了限制（是否超出范围）： 
:SOUR:CURR:VLIM:TRIP?
```



### STATus  
`STATus`子系统主要用来管理和控制仪器的状态寄存器。这些寄存器用于记录仪器的操作事件、错误、以及其他重要状态变化。通过这个子系统，你可以对事件进行监控、记录、清除，或者查询仪器当前的状态，这对于确保测量的准确性和排除故障非常重要。  



### SYSTem

`SYSTem`子系统包含一系列命令，这些命令影响仪器的整体操作，例如密码设置、蜂鸣器控制、通讯设置、事件日志和时间等。   
例如生成一个可听见的音调，指定仪器的局域网（LAN）配置，这个命令可以设定仪器的安全级别，如完全开放、独占接口访问、受保护的密码访问等。这有助于在多用户环境中保护仪器不被未授权的修改。   


### TRACe ★     

`TRACe`子系统包含用于控制读取缓冲区的一系列命令。这些命令允许你管理和访问存储在仪器内部缓冲区中的测量数据，非常适合进行数据收集、分析和存储，特别是在需要自动化处理大量数据的情况下。   


**如下是接口汇总**
1. 得到指定缓冲区的 当前存储的数据个数
2. 指令用于得知一个缓冲区，其起始位置与结束位置  
3. 清空目标缓冲区 
4. 从目标缓冲区读取 x-y范围的数据 
5. 当不需要一个缓冲区时，将其删除 
6. 设置缓冲区的填充模式，决定缓冲区是持续填充还是只填充一次然后停止。决定缓冲区填满后是轮回覆盖还是丢弃新数据。  
7. 决定某缓冲区完全空（0%填充）或完全满（100%填充）时，是否会在事件日志中记录这一信息。     
8. 用于创建一个读取缓冲区
9. 用于对存入指定读取缓冲区的测量数据执行数学表达式运算  
10. 用于设置或查询一个读取缓冲区可以存储的测量数据点数量
11. 用于将指定读取缓冲区的数据保存到USB闪存驱动器上的文件中
12. 用于查询指定读取缓冲区中所有读数的平均值
13. 清除与指定读取缓冲区相关联的统计信息，但不清除缓冲区中的读取数据 
14. 用于查询指定读取缓冲区中的最大值和最小值  
15. 返回指定读取缓冲区中所有读数的峰对峰值  
16. 返回指定缓冲区中所有读数的标准偏差  
17. 用于触发测量，并将结果存储在指定的读取缓冲区中  
18. 在读取缓冲区中写入数据时的单位和数字位数  


> 1_  :TRACe:ACTual?   

this command contains the number or reading in the specified reading buffer.    
得到指定缓冲区的 当前存储的数据个数     

```scpi
:TRACe:ACTual? "<bufferName>"   
    <bufferName> = defbuffer1
    一个字符串，用于表示被配置的缓冲区的名字，例如 defbuffer1 、defbuffer2等，
    若是不配置本参数，默认参数是defbuffer1 

# 示例

创建了一个可以存储200个数据点的缓冲区。缓冲区名字叫做testData。
TRACe:MAKE "testData", 200

这个命令设置了在执行测量操作时，设备将进行10次测量
COUN 10

测量的类型为电流测量，并指定使用testData缓冲区来存储这些测量结果
注意，本指令同时会返回测量结果，即第十次的测量的结果，因为MEASure:本身带读取属性
MEASure:CURRent? "testData"

这个命令查询默认缓冲区（defbuffer1）中当前存储的测量数据总数。
TRACe:ACTual?

这个命令用来查询名为testData的缓冲区中当前存储的数据总数
TRACe:ACTual? "testData"
```

> 2_  :TRACe:ACTual:STARt?  与  :TRACe:ACTual:END?   

指令用于得知一个缓冲区，其起始位置与结束位置,不加参数则将调用默认缓冲区defbuffer1

```scpi
对于缓冲区test1 得知它的起始位置
:TRACe:ACTual:STARt? "test1" 
对于缓冲区test1 得知它的结束位置
:TRACe:ACTual:END? "test1"
```


> 3_ :TRACe:CLEar  

清空目标缓冲区,不加参数则将调用默认缓冲区defbuffer1
```scpi
TRACe:CLEar "defbuffer1" 
```   

> 4_ :TRACe:DATA?   

从目标缓冲区读取 x-y范围的数据  
```scpi 

从指定缓冲区返回从startIndex到endIndex的数据。
:TRACe:DATA? <startIndex>, <endIndex>

指定缓冲区名称后，从该缓冲区返回指定范围的数据。
:TRACe:DATA? <startIndex>, <endIndex>, "<bufferName>"

进一步指定要返回的数据元素，如电压值、电流值、时间戳等。
:TRACe:DATA? <startIndex>, <endIndex>, "<bufferName>", <bufferElements>

<bufferElements>：指定要返回的数据元素，可以是如下几种：
    DATE：数据点的测量日期。
    FORMatted：前面板显示的测量值。
    READing：测量读数，根据测量功能设置。
    RELative：相对时间点测量。
    SOURce：源值，如果启用了回读，则为回读值。
    STATus：与测量相关的状态信息等。



# 示例
从"buf100"获取前5个数据点的读数、源值和相对时间。
TRAC:DATA? 1, 5, "buf100", READ, SOUR, REL

获取读数和相对时间。
TRAC:DATA? 1, 5, "buf100", READ, REL

仅获取相对时间。
TRAC:DATA? 1, 5, "buf100", REL

返回"buf100"中前三个读数。
TRAC:DATA? 1, 3, "buf100"
```

> 5_ :TRACe:DELete  

当不需要一个缓冲区时，将其删除   

```scpi
:TRACe:DELete "<bufferName>"
```

> 6_ :TRACe:FILL:MODE   

设置缓冲区的填充模式，决定缓冲区是持续填充还是只填充一次然后停止。  
命令和查询（Command and query）——这意味着这个命令既可以设置信息也可以查询当前设置。   
此命令的设置会在仪器复位、断电或通过设定保留下来。   

对于默认缓冲区 defbuffer1 和 defbuffer2：连续填充（CONTinuous）。   
对于用户定义的缓冲区：填充一次（ONCE）。   

```scpi
:TRACe:FILL:MODE <fillType>, "<bufferName>"    

<fillType>：决定缓冲区的数据填充方式。
    CONTinuous：缓冲区满后，新的数据会覆盖旧的数据。
    ONCE：缓冲区满后停止填充，新的数据将被丢弃。  
<bufferName>：缓冲区的名称，如果不指定，默认操作defbuffer1。   


# 示例  
创建缓冲区 
TRACe:MAKE "testData", 100  

查询当前填充模式
TRACe:FILL:MODE? "testData"，若是ONCE表明当前模式为只填充一次  

改为连续填充模式
TRACe:FILL:MODE CONT, "testData"
```

> 7_ :TRACe:LOG:STATe  

用于设置或查询指定读取缓冲区的信息事件记录状态。这个状态决定了当缓冲区完全空（0%填充）或完全满（100%填充）时，是否会在事件日志中记录这一信息。   

对于默认缓冲区 defbuffer1 和 defbuffer2：开启（ON，1）   

```scpi
为指定的缓冲区设置日志记录状态。
:TRACe:LOG:STATe <logState>, "<bufferName>"  
```


> 8_ :TRACe:MAKE  

用于创建用户定义的读取缓冲区，仅命令（Command only）——这意味着这是一个执行型命令，不返回数据。此命令的设置在仪器复位、断电后不会保留，除非进行特定的保存设置操作。  


```scpi
创建一个新的读取缓冲区，名为 <bufferName>，大小为 <bufferSize>。
:TRACe:MAKE "<bufferName>", <bufferSize>  

在创建缓冲区时指定一个特定的缓冲区样式。
:TRACe:MAKE "<bufferName>", <bufferSize>, <bufferStyle>  

```

> 9_ :TRACe:MATH  

用于对存入指定读取缓冲区的测量数据执行数学表达式运算。这种操作允许用户在数据存储时即对其进行预处理，适用于需要即时数据处理的应用场景。  

> 10_ :TRACe:POINts  

用于设置或查询一个读取缓冲区可以存储的测量数据点数量。这使得用户可以根据需要调整缓冲区的大小，以适应不同的测量需求。   
类型：命令与查询（Command and query）——表示该命令既可以设置值也可以查询值。   
影响因素：该命令的设置在仪器重置或断电后不会被保存。  
默认值：不存在默认值，因为这取决于特定缓冲区的当前设置。  

```scpi
:TRACe:POINts <newSize>, "<bufferName>"  
:TRACe:POINts? "<bufferName>"

<newSize>：新的缓冲区大小，如果设为0，则根据可用内存自动最大化缓冲区大小。
<bufferName>：指定操作的缓冲区名称。如果没有指定，默认为 defbuffer1。

# 示例
TRACe:MAKE "testData", 100  
将 testData 缓冲区的容量修改为300个读数
TRACe:POINts 300, "testData"
```

> 11_ :TRACe:SAVE 与 :TRACe:SAVE:APPend

:TRACe:SAVE 用于将指定读取缓冲区的数据保存到USB闪存驱动器上的文件中。   
仅命令（Command only）——这意味着此命令用于执行操作，而不返回任何响应数据。    

:TRACe:SAVE:APPend 用于将指定读取缓冲区的数据追加到USB闪存驱动器上的现有文件中。  
这使得你可以在不覆盖旧数据的情况下，继续在同一个文件中保存新的测量数据。   

> 12_ :TRACe:STATistics:AVERage?   

用于查询指定读取缓冲区中所有读数的平均值。这是一个查询型命令，专门用于从设定的缓冲区中计算出平均读数值。  
```scpi
:TRACe:STATistics:AVERage? "<bufferName>"
```

> 13_ :TRACe:STATistics:CLEar

用于清除与指定读取缓冲区相关联的统计信息，但不清除缓冲区中的读取数据。这对于在不删除原始数据的情况下重置统计计算非常有用。  

> 14_ :TRACe:STATistics:MAXimum? 与 :TRACe:STATistics:MINimum?   

用于查询指定读取缓冲区中的最大值和最小值。

> 15_ :TRACe:STATistics:PK2Pk?   

用于返回指定读取缓冲区中所有读数的峰对峰值（即缓冲区中最大值与最小值之差）。  

> 16_ :TRACe:STATistics:STDDev?  

这个命令用来返回指定缓冲区中所有读数的标准偏差。标准偏差是衡量读数散布（即变异或分散）程度的一种统计量。  

> 17_ :TRACe:TRIGger  

这个命令用于触发测量，并将结果存储在指定的读取缓冲区中。在使用这个命令前，需要选择一个测量功能，并通过 COUNT 命令设置测量次数。  
```scpi
:TRACe:TRIGger 使用默认缓冲区进行触发测量。
:TRACe:TRIGger "<bufferName>" 使用指定的缓冲区进行触发测量。
```

> 18_ :TRACe:WRITe:FORMat  

用于设置在读取缓冲区中写入数据时的单位和数字位数。这个命令适用于可写（writable）或完全可写（full writable）的缓冲区样式，并且可以指定每个读取的单位和精确到的小数位数。  


### TRIGger

`TRIGger`子系统负责配置和控制触发操作，包括触发模型。这些命令允许用户设置和管理触发事件，以便精确地控制测量序列和测试过程  

TRIGger子系统其实就是用来管理和设置仪器的触发逻辑的工具。触发逻辑指的是什么时候以及在什么条件下，仪器应该开始或停止测量或其他相关操作。这在自动化测试和精确控制实验流程时非常有用。   

